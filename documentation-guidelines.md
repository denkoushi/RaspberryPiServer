# ドキュメント運用ガイドライン

この文書は `RaspberryPiServer` リポジトリで扱うドキュメントの役割と記述ルールを定め、情報の分散・重複を防ぐことを目的としています。新たに情報を追加・更新するときは、必ず本ガイドラインを参照してください。

## 1. ドキュメント分類と役割

| ファイル | 主な対象者 | 目的と掲載すべき情報 |
| --- | --- | --- |
| `README.md` | 初期セットアップ担当 / プロジェクト関係者 | リポジトリ概要、開発環境構築手順、主要ドキュメントへのリンク。詳細手順は RUNBOOK 等へ委譲する。 |
| `AGENTS.md` | エージェント / 自動化タスク | 作業開始前の前提、コミュニケーション指針、リンク集。新規タスク開始時に必ず確認する。 |
| `documentation-guidelines.md` | 全員 | ドキュメントの種別、記述ルール、更新フロー。 |
| `CHANGELOG.md` | 開発・運用双方 | 適用済みの変更履歴のみを記録。将来計画は記載しない。 |
| `RUNBOOK.md` | 運用担当（現場・情シス） | サービスの常駐手順、デプロイ方法、障害対応や確認コマンドの詳細。実装済みの手順のみ掲載。 |
| `docs/requirements.md` | プロダクトオーナー / 開発者 | 要件、優先度、未実装タスク、決定事項（Decision Log）。検討中・未実装事項はこちらへ集約。 |
| `docs/architecture.md` | 開発者 / レビュー担当 | システム構成、通信経路、依存サービス、データフローの概要。図解が必要な場合はこのファイルで管理。 |
| `docs/incident-response.md` | 運用担当 | 想定インシデント、検知方法、初動対応、復旧完了の判断基準。必要に応じて新規作成する。 |
| `docs/sample-data/` | 開発者 / テスト担当 | テスト・検証用のサンプルデータ。個人情報を含まない形で管理する。 |
| `docs/test-notes/` | 開発者 / 運用者 | 実機検証ログやチェックリスト。日付入りファイル名で記録し、14 日チェックなどの証跡を残す。 |

## 2. 記述ルール
- **一次情報は一か所に集約**: 同じ内容を複数ファイルへ重複記載しない。README から詳細手順へリンクするなど参照関係を明確にする。
- **ステータスの明確化**: 実装済みの手順・運用は RUNBOOK、検討中や未実装の項目は `docs/requirements.md` に記載する。
- **言語統一**: 原則として日本語で記述する。外部共有を想定する場合は必要部分のみ補足で英語訳を添える。
- **コードブロックの形式**: コマンド例は ```bash などのフェンスコードで囲み、前後に目的・前提条件・期待結果を明記する。
- **更新履歴の連携**: 重要な変更を行った場合は `CHANGELOG.md` にも記録し、関連ドキュメントからリンクを張る。
- **機微情報の扱い**: 認証情報や機微情報は直接記載しない。環境変数やシークレット管理方法のみを記述し、具体値は共有しない。

## 3. 追加・更新フロー
1. 追加・更新する情報がどのドキュメントに属するか、本ガイドラインの表を参照して決定する。
2. 既存ドキュメントに近い内容がないか確認し、必要に応じて統合・移動を検討する。
3. ドキュメントを更新したら、リンク元のファイルや関連セクションの整合が取れているか確認する。
4. 変更内容がチーム全体に影響する場合は、`CHANGELOG.md` やコミットメッセージで更新箇所を明示する。

## 4. レビューと棚卸し
- 四半期に一度、または主要リリースの後に README、RUNBOOK、`docs/requirements.md` を中心に棚卸しを行い、古くなった情報や重複を整理する。
- ガイドライン自体に改善が必要な場合は本ファイルを更新し、関連する変更を `AGENTS.md` と `CHANGELOG.md` に反映する。

---

このガイドラインに従ってドキュメントを整備し、情報の一貫性と参照性を維持してください。
